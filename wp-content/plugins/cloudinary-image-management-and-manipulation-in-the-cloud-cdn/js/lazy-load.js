!function(){"use strict";function t(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function i(i){return function(i){if(Array.isArray(i))return t(i)}(i)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||function(i,e){if(i){if("string"==typeof i)return t(i,e);var n=Object.prototype.toString.call(i).slice(8,-1);return"Object"===n&&i.constructor&&(n=i.constructor.name),"Map"===n||"Set"===n?Array.from(i):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(i,e):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var e={deviceDensity:window.devicePixelRatio?window.devicePixelRatio:"auto",density:null,images:[],throttle:!1,config:CLDLB||{},lazyThreshold:0,_init:function(){var t=this;this._calcThreshold(),i(document.images).forEach((function(i){if(i.dataset.publicId){var e=i.dataset.size.split(" ");i.originalWidth=e[0],i.originalHeight=e[1],e[2]&&(i.crop=e[2]),t.images.push(i),i.addEventListener("error",(function(e){i.src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"><rect width="100%" height="100%" fill="rgba(0,0,0,0.1)"/><text x="50%" y="50%" fill="red" text-anchor="middle" dominant-baseline="middle">%26%23x26A0%3Bï¸Ž</text></svg>';var n=t.images.indexOf(i);t.images.splice(n,1)}))}})),window.addEventListener("resize",(function(){t._throttle(t._build.bind(t),100,!0)})),window.addEventListener("scroll",(function(){t._throttle(t._build.bind(t),100,!1)})),setTimeout((function(){return t._build()}),0)},_calcThreshold:function(){var t=this.config.lazy_threshold.replace(/[^0-9]/g,""),i=0;switch(this.config.lazy_threshold.replace(/[0-9]/g,"").toLowerCase()){case"em":i=parseFloat(getComputedStyle(document.body).fontSize)*t;break;case"rem":i=parseFloat(getComputedStyle(document.documentElement).fontSize)*t;break;case"vh":i=window.innerHeight/t*100;break;default:i=t}this.lazyThreshold=window.innerHeight+parseInt(i,10)},_getDensity:function(){if(this.density)return this.density;var t=this.config.dpr?this.config.dpr.replace("X",""):"off";if("off"===t)return this.density=1,1;var i=this.deviceDensity;return"max"!==t&&"auto"!==i&&(t=parseFloat(t),i=i>Math.ceil(t)?t:i),this.density=i,i},_throttle:function(t,i,e){var n=this;this.throttle||setTimeout((function(){t(e),n.throttle=!1}),i)},_build:function(t){var i=this;this.images.forEach((function(e){!t&&e.cld_loaded||i.buildSize(e)}))},_shouldRebuild:function(t){var i=this.scaleWidth(t),e=t.getBoundingClientRect(),n="auto"!==this.density?this._getDensity():1;return e.top<this.lazyThreshold&&(i>t.naturalWidth/n||!t.cld_loaded)},_shouldPlacehold:function(t){var i=this.scaleWidth(t),e=t.getBoundingClientRect(),n="auto"!==this.density?this._getDensity():1;return this.config.placeholder&&!t.cld_loaded&&e.top<2*this.lazyThreshold&&(i>t.naturalWidth/n||!t.cld_placehold)},scaleWidth:function(t){var i=this.config.pixel_step,e=Math.floor((t.originalWidth-t.width)/i),n=t.originalWidth-i*e;return n>t.originalWidth?n=t.originalWidth:this.config.max_width<n?n=this.config.max_width:this.config.min_width>n&&(n=this.config.min_width),n},scaleSize:function(t,i){var e=(t.originalWidth/t.originalHeight).toFixed(3),n=(t.width/t.height).toFixed(3),o=this.scaleWidth(t),r=[];t.width!==t.originalWidth&&r.push(e===n?"c_scale":"c_fill,g_auto");var a=Math.round(o/n);if(r.push("w_"+o),r.push("h_"+a),i){var s=this._getDensity();1!==s&&r.push("dpr_"+s)}return{transformation:r.join(","),nameExtension:o+"x"+a}},buildSize:function(t){this._shouldRebuild(t)?t.dataset.srcset?(t.cld_loaded=!0,t.srcset=t.dataset.srcset):t.src=this.getSizeURL(t):this._shouldPlacehold(t)&&(t.src=this.getPlaceholderURL(t))},getSizeURL:function(t){t.cld_loaded=!0;var i=this.scaleSize(t,!0),e="auto"!==this.config.image_format&&"none"!==this.config.image_format?this.config.image_format:t.dataset.format,n=t.dataset.publicId.split("/").pop();return[this.config.base_url,"images",i.transformation,t.dataset.transformations,t.dataset.publicId,n+"-"+i.nameExtension+"."+e+"?_i=AA"].filter(this.empty).join("/")},getPlaceholderURL:function(t){t.cld_placehold=!0;var i=this.scaleSize(t,!1);return[this.config.base_url,"images",i.transformation,this.config.placeholder,t.dataset.publicId,"placeholder"].filter(this.empty).join("/")},empty:function(t){return 0!==t.length}};window.addEventListener("load",(function(){e._init()}))}();